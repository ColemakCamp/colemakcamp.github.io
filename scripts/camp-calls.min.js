function changeSelected(e,t){"layout"===t?changeLayout(e.getAttribute("data-value")):"keyboard"===t&&changeKeyboard(e.getAttribute("data-value"))}function updateSelectors(){let e=layout.getAttribute("data-value"),t=keyboard.getAttribute("data-value");layout.querySelector("span").innerText=document.querySelector(`li[data-value=${e}]`).innerText,keyboard.querySelector("span").innerText=document.querySelector(`li[data-value=${t}]`).innerText}function closeSelectors(){let e=document.querySelectorAll("#selectors list");for(let t=0;t<e.length;t++)e[t].classList.contains("close")||(e[t].classList.add("close"),setTimeout(function(){e[t].classList.add("hide")},100))}function toggleSelectors(e){let t=document.querySelector(`#${e} list`);t.classList.contains("close")?(closeSelectors(),t.classList.remove("hide"),setTimeout(function(){t.classList.remove("close")},10)):(t.classList.add("close"),setTimeout(function(){t.classList.add("hide")},100))}function storeCustomLayout(){setJSON("customLevelDictionary",levelDictionaries.custom),setJSON("customLayoutMap",layoutMaps.custom)}updateSelectors(),document.addEventListener("mousedown",function(e){if(0!==e.button)return;let t=e.target,o=["layout","keyboard"];for(let e=0;e<o.length;e++)(document.getElementById(o[e])===t||document.getElementById(o[e]).contains(t))&&(window.selectorDown=o[e])}),document.addEventListener("mouseup",function(e){if(0!==e.button)return;let t=e.target,o=["layout","keyboard"];for(let e=0;e<o.length;e++)if(window.selectorDown===o[e]&&document.getElementById(o[e]).contains(t))return toggleSelectors(o[e]),void(t.tagName.match(/^li$/i)&&changeSelected(t,o[e]));closeSelectors()}),document.querySelector("#sub backdrop").addEventListener("click",function(){discardButton.click()}),document.addEventListener("mouseover",function(e){if("iso"!==localStorage.currentKeyboard)return;let t=document.querySelectorAll("#customEnterTop, #customEnterBottom");e.target.id.match(/^customEnter/)?(t[0].classList.add("pseudoHover"),t[1].classList.add("pseudoHover")):(t[0].classList.remove("pseudoHover"),t[1].classList.remove("pseudoHover"))}),document.addEventListener("click",function(e){let t=e.target,o=document.querySelector(".menu-nav .fa-preferences"),a=document.querySelector(".menu-nav .fa-theme"),c=document.querySelector(".menu-nav .fa-close"),n=document.querySelector("menubar mbody");t!=o&&t!=o.parentNode||(n.classList.remove("accentuate"),n.classList.add("configure"),a.parentNode.classList.remove("active"),o.parentNode.classList.add("active")),t!=a&&t!=a.parentNode||(n.classList.remove("configure"),n.classList.add("accentuate"),o.parentNode.classList.remove("active"),a.parentNode.classList.add("active")),t!=c&&t!=c.parentNode||closeMenu()}),document.addEventListener("click",function(e){let t=e.target,o=document.querySelector("li.limit");(t===o||o.contains(t))&&o.querySelector("input:not(.dispose)").focus()}),document.addEventListener("click",function(e){let t=e.target,o=document.getElementById("keymapping");(t===o||o.contains(t))&&("true"===localStorage.getItem("keyRemapping")?(localStorage.setItem("keyRemapping",!1),o.setAttribute("data-value","off")):(localStorage.setItem("keyRemapping",!0),o.setAttribute("data-value","on")))}),localStorage.customLevelDictionary&&localStorage.customLayoutMap&&(levelDictionaries.custom=getJSON("customLevelDictionary"),layoutMaps.custom=getJSON("customLayoutMap")),document.addEventListener("click",function(e){let t=document.querySelector("header left");(e.target==t||t.contains(e.target))&&window.location.reload(!0)});